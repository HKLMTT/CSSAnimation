"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}();!function(t){t.ca={getThis:function(t){var e;return t.each(function(){if(this.anim)return void(e=this)}),e?e:t[0]},get v(){return"0.0.24"}},console.log("init ca_v."+t.ca.v);var e=function(){var t=navigator.userAgent;return t.indexOf("Opera")>-1?"-o-":t.indexOf("Firefox")>-1?"-moz-":t.indexOf("Chrome")>-1?"":t.indexOf("Safari")>-1?"-webkit-":""}(),i={transition:"transitionend","-moz-transition":"transitionend","-webkit-transition":"webkitTransitionEnd"},s={"perspective-origin":!0,transition:!0},a={x:"translateX",y:"translateY",z:"translateZ",pOrigin:"perspective-origin",tOrigin:"transform-origin",alpha:"opacity"};t.fn.ca=function(e,i,s){var a=t.ca.getThis(this);a.animList instanceof Array==!1&&(a.animList=[]);var r=function t(e){var i=this;if("complete"===e){if(a.anim.hide&&this.hide(0),a.animList[0][1]){var r=a.animList[0][1];setTimeout(function(){return r.call(i,e)},0)}a.animList.shift(),a.anim&&(a.anim.clear(),a.anim=null,delete a.anim)}a.animList&&a.animList.length>0?(a.anim=new n(this,a.animList[0][0],function(e){return t.call(i,e)},s),window.setTimeout(function(){return a.anim&&a.anim.run()},0)):(this.css("transition",""),a.animList&&delete a.animList)};return a.animList.push(arguments),1===a.animList.length&&r.call(this),this},t.fn.caPlay=function(){return this[0].anim&&this[0].anim.play(),this},t.fn.caStop=function(){return this[0].anim&&(this[0].anim.stop(),this.caClear()),this},t.fn.caPause=function(){return this[0].anim&&this[0].anim.pause(),this},t.fn.caClear=function(){return this.each(function(){this.anim&&(this.anim.clear(),this.anim=null,this.animList=null,delete this.animList,delete this.anim)}),this},t.fn.caX=function(){return n.getTranslate3d(this).x},t.fn.caY=function(){return n.getTranslate3d(this).y},t.fn.caZ=function(){return n.getTranslate3d(this).z},t.fn.ca3D=function(){return n.getTranslate3d(this)},t.fn.caSlide=function(t,e,i,s){s||(s="slide");var a="ca-"+s;return t="boolean"!=typeof t?"hide"!==this.attr(a)&&"none"!==this.css("display"):!t,(void 0===e||isNaN(e))&&(e=400),"flip"===s?(this.css("transform-origin","50% 50% 0"),t?this.attr(a,"hide").caClear().ca({rotateX:90,alpha:0,hide:!0,time:e},i):this.attr(a,"show").caClear().ca({rotateX:90,alpha:0,hide:!0,time:0}).ca({rotateX:0,alpha:1,time:e},i)):"turn"===s?(this.css("transform-origin","50% 50% 0"),t?this.attr(a,"hide").caClear().ca({rotateY:90,alpha:0,hide:!0,time:e},i):this.attr(a,"show").caClear().ca({rotateY:90,alpha:0,hide:!0,time:0}).ca({rotateY:0,alpha:1,time:e},i)):(this.css("transform-origin","0 0"),t?this.attr(a,"hide").caClear().ca({scaleY:0,hide:!0,time:e},i):this.attr(a,"show").caClear().ca({scaleY:0,alpha:1,hide:!0,time:0}).ca({scaleY:1,time:e},i)),this},t.fn.caFlip=function(t,e,i){return this.caSlide(t,void 0===e?300:e,i,"flip"),this},t.fn.caTurn=function(t,e,i){return this.caSlide(t,void 0===e?300:e,i,"turn"),this};var n=function(){function n(){_classCallCheck(this,n),"object"==_typeof(arguments[0])&&"pause"!==this.state&&(this.state="init",this.transform={},this.obj=arguments[0],this.time=400,this.delay=0,this.ease="ease",this.count=0,this.reanim=!1,this.hide=!1,this.css=this.arrange(arguments[1]),this.complete=arguments[2],this.steping=arguments[3])}return _createClass(n,[{key:"run",value:function(t){var s=this;"pause"!==this.state&&void 0!==this.obj&&void 0!==this.css&&(this.state="playing","re"!=t&&this.time>0&&(this.css.transition=this.getTransition(this.time,this.ease,this.delay)),this.timeout&&clearTimeout(this.timeout),this.obj.show(0),0===this.time&&0===this.delay?(this.obj.css(this.css),this.end.call(this,"complete")):this.time>0?(this.step(!0),this.obj.first().one(i[e+"transition"],function(){return s.end.call(s,"complete")}),this.timeout=setTimeout(function(){return s.end.call(s,"complete")},1.2*(this.time+this.delay)),this.obj.css(this.css)):this.timeout=setTimeout(function(){s.obj.css(s.css),s.end.call(s,"complete")},1.2*(this.time+this.delay)))}},{key:"step",value:function(t){var e=this;clearInterval(this.Interval),t&&(this.starTime=new Date,this.steping&&(this.Interval=setInterval(function(){e.steping()},1e3/30)))}},{key:"getTransition",value:function(t,e,i){var a="";if(t>0)for(var n in this.css)s[n]||""==this.css[n]||(""!=a&&(a+=","),a+=n+" "+t+"ms "+e+(i>0?" "+i+"ms":""));return a}},{key:"reset",value:function(t){var s=this;this.reanim?(this.step(!0),this.obj.first().one(i[e+"transition"],function(){return t.call(s)})):(this.obj.css("transition",""),window.setTimeout(function(){return t.call(s)},0)),this.obj.css(this.lastcss)}},{key:"play",value:function(){"pause"==this.state&&(this.state="playing",this.obj.css(this.pauseCss).css("transition",this.getTransition(this.pauseTime,this.ease,this.delay)),this.step(!0))}},{key:"pause",value:function(){if("pause"!==this.state){this.state="pause",this.step(!1);var t=window.getComputedStyle?window.getComputedStyle(this.obj[0]):this.obj[0].currentStyle,e={};this.pauseCss={};for(var i in this.css)e[i]=t[i],this.pauseCss[i]=this.obj[0].style[i];var s=1e3*Number(t["transition-duration"].split("s")[0]),a=this.starTime-new Date;this.pauseTime=s+a,e.transition="",this.obj.css(e)}}},{key:"stop",value:function(){"init"!==this.state&&(this.state="stop",this.obj&&this.obj.css("transition",""),this.clear())}},{key:"end",value:function(){var t=this;this.step(!1),this.timeout&&clearTimeout(this.timeout),this.obj&&(this.obj.off(i[e+"transition"]),0===this.count||isNaN(this.count)?(this.state="end",this.complete(arguments[0],0)):(this.steping&&this.steping("replay",this.count),this.count--,this.reset(function(){return t.run("re")})))}},{key:"arrange",value:function(e){var i={transform:{}};this.lastcss={},this.oTf(this.obj);for(var s in e)switch(s){case"time":isNaN(e[s])||(this.time=e[s]);break;case"delay":isNaN(e[s])||(this.delay=e[s]);break;case"ease":t.cssEase[e[s]]?this.ease=t.cssEase[e[s]]:this.ease=e[s];break;case"count":isNaN(e[s])||(this.count=e[s]);break;case"reanim":"boolean"==typeof e[s]&&(this.reanim=e[s]);break;case"hide":"boolean"==typeof e[s]&&(this.hide=e[s]);break;default:var a=this.alias(s);"function"==typeof this[a]?e[s]instanceof Array?this[a](e[s]):this[a]([e[s]]):(i[a]=e[s].toString(),this.lastcss[a]=this.obj.css(a))}i.transform="";for(var s in this.transform)""!=i.transform&&(i.transform+=" "),i.transform+=s+"("+this.transform[s]+")";return this.lastcss.transform=this.obj.css("transform"),i}},{key:"oTf",value:function(t){var e=this,i=t[0].style.transform;if(""!==i){var s={};i.replace(/([a-zA-Z0-9]+)\((.*?)\)/g,function(t,i,a){s[i]=a.split(","),e[i](s[i])})}}},{key:"alias",value:function(t){var e=a[t];return"string"==typeof e?e:t}},{key:"setTf",value:function(t,e,i){if(this.transform[e]||(this.transform[e]=i),t instanceof Array)for(var s in t)null!==t[s]&&(this.transform[e][s]=t[s]);else this.transform[e]=[t]}},{key:"clear",value:function(){this.step(!1),this.timeout&&clearTimeout(this.timeout),this.obj&&this.obj.off(i[e+"transition"]);for(var t in this)this[t]=null,delete this[t]}},{key:"matrix",value:function(t){delete this.transform.matrix3d,this.transform.matrix=t}},{key:"matrix3d",value:function(t){delete this.transform.matrix,this.transform.matrix3d=t}},{key:"translate3d",value:function(t){t.forEach(function(e,i){null===e||isNaN(e)||(t[i]+="px")}),this.setTf(t,"translate3d",[0,0,0])}},{key:"translate",value:function(t){this.translate3d([t[0],t[1],null])}},{key:"translateX",value:function(t){this.translate3d([t[0],null,null])}},{key:"translateY",value:function(t){this.translate3d([null,t[0],null])}},{key:"translateZ",value:function(t){this.translate3d([null,null,t[0]])}},{key:"scale3d",value:function(t){this.setTf(t,"scale3d",[1,1,1])}},{key:"scale",value:function(t){1===t.length?this.scale3d([t[0],t[0]]):this.scale3d([t[0],t[1],null])}},{key:"scaleX",value:function(t){this.scale3d([t[0],null,null])}},{key:"scaleY",value:function(t){this.scale3d([null,t[0],null])}},{key:"scaleZ",value:function(t){this.scale3d([null,null,t[0]])}},{key:"rotate3d",value:function(t){isNaN(t[3])||(t[3]=t[3]+"deg"),this.setTf(t,"rotate3d",[0,0,0,0])}},{key:"rotate",value:function(t){this.setTf(isNaN(t[0])?t:t[0]+"deg","rotate",[0])}},{key:"rotateX",value:function(t){this.setTf(isNaN(t[0])?t:t[0]+"deg","rotateX",[0])}},{key:"rotateY",value:function(t){this.setTf(isNaN(t[0])?t:t[0]+"deg","rotateY",[0])}},{key:"rotateZ",value:function(t){this.setTf(isNaN(t[0])?t:t[0]+"deg","rotateZ",[0])}},{key:"skew",value:function(t){1===t.length&&(t=[t[0],t[0]]),t.forEach(function(e,i){null===e||isNaN(e)||(t[i]+="deg")}),this.setTf(t,"skew",[0,0])}},{key:"skewX",value:function(t){this.skew([t[0]])}},{key:"skewY",value:function(t){this.skew([null,t[0]])}},{key:"perspective",value:function(t){this.setTf(isNaN(t[0])?t:t[0]+"px","perspective",[0])}}],[{key:"getTranslate3d",value:function(e){var i=t(e)[0].style.transform;return i&&i.indexOf("translate3d")!=-1?(i=i.match(/translate3d\((.*)\)/i)[1].replace(/px/gi,"").split(","),i={x:Number(i[0]),y:Number(i[1]),z:Number(i[2])}):i&&i.indexOf("matrix")!=-1?(i=i.match(/matrix\((.*)\)/i)[1].replace(/px/gi,"").split(","),i={x:Number(i[4]),y:Number(i[5]),z:0}):i={x:0,y:0,z:0}}}]),n}();t.cssEase={ease:"ease",in:"ease-in",out:"ease-out","in-out":"ease-in-out",linear:"cubic-bezier(1,1,1,1)",snap:"cubic-bezier(0,1,.5,1)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"}}(jQuery);
