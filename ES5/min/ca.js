"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}();!function(t){t.fn.ca_v="0.0.1";var e=function(){var t=navigator.userAgent;return t.indexOf("Opera")>-1?"-o-":t.indexOf("Firefox")>-1?"-moz-":t.indexOf("Chrome")>-1?"":t.indexOf("Safari")>-1?"-webkit-":""}(),i={transition:"transitionend","-moz-transition":"transitionend","-webkit-transition":"webkitTransitionEnd"},s={"perspective-origin":!0,transition:!0},n={x:"translateX",y:"translateY",z:"translateZ",origin:"perspective-origin",alpha:"opacity"};console.log("Browser ",e),t.fn.ca=function(t,e,i){this[0].animList instanceof Array==!1&&(this[0].animList=[]);var s=function t(s){var n=this;"complete"===s&&(this[0].animList.shift(),this[0].anim&&(this[0].anim.clear(),this[0].anim=null,delete this[0].anim)),0===this[0].animList.length?(delete this[0].animList,e&&e(s)):(this[0].anim=new a(this,this[0].animList[0],function(e){return t.call(n,e)},i),setTimeout(function(){return n[0].anim.run()},0))};return this[0].animList.push(t),1===this[0].animList.length&&s.call(this),this},t.fn.caplay=function(t){return this[0].anim.play(),this},t.fn.castop=function(t){return this[0].anim.stop(t),this},t.fn.capause=function(t){return this[0].anim.pause(),this},t.fn.cax=function(t){},t.fn.cay=function(t){},t.fn.caz=function(t){};var a=function(){function a(){_classCallCheck(this,a),"object"==_typeof(arguments[0])&&"pause"!==this.state&&(this.state="init",this.transform={},this.obj=arguments[0],this.time=400,this.delay=0,this.ease="ease",this.count=0,this.reanim=!1,this.css=this.arrange(arguments[1]),this.complete="function"==typeof arguments[2]?arguments[2]:null,this.steping="function"==typeof arguments[3]?arguments[3]:null)}return _createClass(a,[{key:"run",value:function(t){var s=this,n=arguments;"pause"!==this.state&&("re"!=t&&(this.css.transition=this.getTransition(this.time,this.ease,this.delay)),this.obj.css(this.css),this.step(!0),this.obj.first().one(i[e+"transition"],function(t){return s.end.apply(s,n)}))}},{key:"step",value:function(t){var e=this;clearInterval(this.Interval),t&&(this.starTime=new Date,this.Interval=setInterval(function(){e.steping&&e.steping()},1e3/30))}},{key:"getTransition",value:function(t,e,i){var n="";for(var a in this.css)s[a]||(""!=n&&(n+=","),n+=a+" "+t+"ms "+e+(i>0?" "+i+"ms":""));return n}},{key:"reset",value:function(t){var s=this,n=arguments;this.obj.css(this.lastcss),this.reanim?(this.step(!0),this.obj.first().one(i[e+"transition"],function(){t.apply(s,n)})):(this.obj.css("transition",""),window.setTimeout(function(){return t.call(s)},0))}},{key:"play",value:function(){"pause"==this.state&&(this.state="playing",this.obj.css(this.pauseCss).css("transition",this.getTransition(this.pauseTime,this.ease,this.delay)),this.step(!0))}},{key:"pause",value:function(){if("pause"!==this.state){this.state="pause",this.step(!1);var t=window.getComputedStyle?window.getComputedStyle(this.obj[0]):this.obj[0].currentStyle,e={};this.pauseCss={};for(var i in this.css)e[i]=t[i],this.pauseCss[i]=this.obj[0].style[i];var s=1e3*Number(t["transition-duration"].split("s")[0]),n=this.starTime-new Date;this.pauseTime=s+n,e.transition="",this.obj.css(e)}}},{key:"stop",value:function(t){if("init"!==this.state){this.state="stop";var e=window.getComputedStyle?window.getComputedStyle(this.obj[0]):this.obj[0].currentStyle;t&&this.obj.css("transform",e.transform),this.obj.css("transition","")}}},{key:"end",value:function(){var t=this;if(this.step(!1),0===this.count)return this.obj.css("transition",""),this.state="end",void(this.complete&&window.setTimeout(function(){return t.complete("complete",0)},0));this.steping&&this.steping("replay",this.count),this.count--,this.reset(function(){return t.run("re")})}},{key:"arrange",value:function(e){var i={transform:{}};this.lastcss={},this.oTf(this.obj);for(var s in e)switch(s){case"time":isNaN(e[s])||(this.time=e[s]);break;case"delay":isNaN(e[s])||(this.delay=e[s]);break;case"ease":t.cssEase[e[s]]?this.ease=t.cssEase[e[s]]:this.ease=e[s];break;case"count":isNaN(e[s])||(this.count=e[s]);break;case"reanim":isNaN(e[s])||(this.reanim=e[s]);break;default:var n=this.alias(s);"function"==typeof this[n]?e[s]instanceof Array?this[n](e[s]):this[n]([e[s]]):(i[n]=e[s],this.lastcss[n]=this.obj.css(n))}i.transform="";for(var s in this.transform)""!=i.transform&&(i.transform+=" "),i.transform+=s+"("+this.transform[s]+")";return this.lastcss.transform=this.obj.css("transform"),i}},{key:"oTf",value:function(t){var e=this,i=t[0].style.transform;if(""!==i){var s={};i.replace(/([a-zA-Z0-9]+)\((.*?)\)/g,function(t,i,n){s[i]=n.split(","),e[i](s[i])})}}},{key:"alias",value:function(t){var e=n[t];return"string"==typeof e?e:t}},{key:"setTf",value:function(t,e,i){if(this.transform[e]||(this.transform[e]=i),t instanceof Array)for(var s in t)t[s]&&(this.transform[e][s]=t[s]);else this.transform[e]=[t]}},{key:"clear",value:function(){for(var t in this)this[t]=null,delete this[t]}},{key:"matrix",value:function(t){delete this.transform.matrix3d,this.transform.matrix=t}},{key:"matrix3d",value:function(t){delete this.transform.matrix,this.transform.matrix3d=t}},{key:"translate3d",value:function(t){t.forEach(function(e,i){isNaN(e)||(t[i]+="px")}),this.setTf(t,"translate3d",[0,0,0])}},{key:"translate",value:function(t){this.translate3d([t[0],t[1],NaN])}},{key:"translateX",value:function(t){this.translate3d([t[0],NaN,NaN])}},{key:"translateY",value:function(t){this.translate3d([NaN,t[0],NaN])}},{key:"translateZ",value:function(t){this.translate3d([NaN,NaN,t[0]])}},{key:"scale3d",value:function(t){this.setTf(t,"scale3d",[1,1,1])}},{key:"scale",value:function(t){1===t.length?this.scale3d([t[0],t[0]]):this.scale3d([t[0],t[1],NaN])}},{key:"scaleX",value:function(t){this.scale3d([t[0],NaN,NaN])}},{key:"scaleY",value:function(t){this.scale3d([NaN,t[0],NaN])}},{key:"scaleZ",value:function(t){this.scale3d([NaN,NaN,t[0]])}},{key:"rotate3d",value:function(t){isNaN(t[3])||(t[3]=t[3]+"deg"),this.setTf(t,"rotate3d",[0,0,0,0])}},{key:"rotate",value:function(t){this.setTf(isNaN(t[0])?t:t[0]+"deg","rotate",[0])}},{key:"rotateX",value:function(t){this.setTf(isNaN(t[0])?t:t[0]+"deg","rotateX",[0])}},{key:"rotateY",value:function(t){this.setTf(isNaN(t[0])?t:t[0]+"deg","rotateY",[0])}},{key:"rotateZ",value:function(t){this.setTf(isNaN(t[0])?t:t[0]+"deg","rotateZ",[0])}},{key:"skew",value:function(t){1===t.length&&(t=[t[0],t[0]]),t.forEach(function(e,i){isNaN(e)||(t[i]+="deg")}),this.setTf(t,"skew",[0,0])}},{key:"skewX",value:function(t){this.skew([t[0]])}},{key:"skewY",value:function(t){this.skew([NaN,t[0]])}},{key:"perspective",value:function(t){this.setTf(isNaN(t[0])?t:t[0]+"px","perspective",[0])}}]),a}();t.cssEase={ease:"ease",in:"ease-in",out:"ease-out","in-out":"ease-in-out",linear:"cubic-bezier(1,1,1,1)",snap:"cubic-bezier(0,1,.5,1)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"}}(jQuery);